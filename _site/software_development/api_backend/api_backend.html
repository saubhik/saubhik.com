<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>API backend | saubhik</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="API backend" />
<meta name="author" content="Saubhik Mukherjee" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Personal cyber-space dump." />
<meta property="og:description" content="Personal cyber-space dump." />
<link rel="canonical" href="http://localhost:4000/software_development/api_backend/api_backend.html" />
<meta property="og:url" content="http://localhost:4000/software_development/api_backend/api_backend.html" />
<meta property="og:site_name" content="saubhik" />
<script type="application/ld+json">
{"description":"Personal cyber-space dump.","author":{"@type":"Person","name":"Saubhik Mukherjee"},"@type":"WebPage","url":"http://localhost:4000/software_development/api_backend/api_backend.html","headline":"API backend","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=7f90a6ed2a8ee84cfa7f3ceb5a300c7e86b460f3">
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://localhost:4000/">saubhik</a></h1>

        

        <p>Personal cyber-space dump.</p>

        <p class="view"><a href="https://github.com/saubhik/">View my GitHub profile<small>github.com/saubhik</small></a></p>
        <p class="view"><a href="/posts.html">Blog<small>/posts</small></a></p>

        

        <a href="/index.html">Home</a>
</br><a href="/papers/">Comments on deep learning papers</a>
</br><a href="/epi/">Elements Of Programming Interviews</a>
</br><a href="/software_development/">Software Development</a>
</br><a href="/utilities/">Utilities</a>
</br><a href="/data_science/">Data Science</a>
</br><a href="/notebooks/">Jupyter Notebooks</a>
</br><a href="/deep_learning/">Deep Learning</a>
</br><a href="/coursework/index.html">CS courses notes</a>
</br><a href="/this_site/">About this website</a>
</br><a href="/practice-javascript/">Practice Javascript</a>


      </header>
      <section>

      <h3 id="api-backend">API backend</h3>

<p>API is an interface using which a front-end service or other services (e.g. a data analysis service) 
can access back-end data. This interface enables multiple clients to interact with a common back end.</p>

<p>Advantages of using an API:</p>
<ol>
  <li>make data accessible across different services</li>
  <li>access data for the same service across multiple platforms such as a mobile app, website, etc.</li>
  <li>scale your service or application by putting different APIs on different computers</li>
  <li>update the back end without changing the front end</li>
</ol>

<p>HTTP requests/verbs:</p>
<ol>
  <li><strong>GET</strong>: It is used to retrieve information from a server. A GET request must be idempotent, i.e. 
it should return the same results no matter how many times the GET request is sent</li>
  <li><strong>POST</strong>: It is used to create a new resource or to send information to the server</li>
  <li><strong>DELETE</strong>: It is used to delete an existing resource from the server</li>
  <li><strong>PUT</strong>: It is generally used to update an already existing resource in its entirety</li>
  <li><strong>PATCH</strong>: It is generally used to update a portion of an already existing resource</li>
</ol>

<p>APIs are of 2 types:</p>
<ol>
  <li><strong>SOAP</strong> (Simple Object Access Protocol): APIs of this type use XML for providing messaging
services.</li>
  <li><strong>REST</strong> (Representational State Transfer): APIs of this type uses simple URLs instead of huge
XML codes for providing messaging services.</li>
</ol>

<p>API endpoints are one end of a communication channel. They are the points through which an API
interacts with another system. Each endpoint is the location from which APIs can access the resources
they need to carry out their functions.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MovieController</span> <span class="o">{</span>
    
    <span class="nd">@Autowired</span>
    <span class="n">MovieService</span> <span class="n">movieService</span><span class="o">;</span>
     
    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">"/movie/add"</span><span class="o">,</span> <span class="n">method</span><span class="o">=</span><span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">,</span> <span class="n">consumes</span><span class="o">=</span><span class="s">"application/json"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Movie</span><span class="o">&gt;</span> <span class="nf">addMovie</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Movie</span> <span class="n">movie</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">movieService</span><span class="o">.</span><span class="na">addMovie</span><span class="o">(</span><span class="n">movie</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Movie</span><span class="o">&gt;(</span><span class="n">movie</span><span class="o">,</span> <span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>REST keyword stands for “Representational State Transfer” and it technically means creating the 
representation of an object’s current state and transferring the representation over the network. 
It was developed during the foundation of HTTP protocol by Roy Fielding.</p>

<p>Characteristics of REST:</p>
<ol>
  <li>APIs are used for client-server communication and REST is an API style that defines how APIs 
should be structured and represented.</li>
  <li>The representation which is transferred over the network is in XML or JSON (JavaScript Object 
Notation) format.</li>
  <li>Data and functionalities (such as methods) can be seen as resources provided by a server, and 
both data and functionalities can be accessed using URIs in a REST API.</li>
  <li>Every resource is uniquely addressable using a uniform and minimal set of commands. For the 
HTTP protocol, we have commands such as GET, POST, PUT and DELETE.</li>
  <li>Rest is stateless, meaning RESTful Web Service should not keep a client state on the server, 
i.e. the result of each request should not dependent on request that has taken place in past or 
request that will take place in future.</li>
  <li>Caching is a core tenant in REST Architecture, especially for GET requests. In the context of 
REST APIs, caching means HTTP caching where server response can be stored in the client (such as a 
browser), so that a client need not make a GET request for the same resource again and again.</li>
</ol>

<p>The Spring framework provides <code class="highlighter-rouge">@RestController</code> annotation to create the restful web services, 
the function of this annotation is the combination of <code class="highlighter-rouge">@Controller</code> and <code class="highlighter-rouge">@ResponseBody</code>. The 
purpose of <code class="highlighter-rouge">@Controller</code> annotation is to map the model object with the corresponding view template 
whereas <code class="highlighter-rouge">@RestController</code> returns the object/data and is written into HTTP response in the form of 
JSON.</p>

<p><code class="highlighter-rouge">@ResponseBody</code> annotation also performs the similar function on the request mapping methods by 
returning the object/data into HTTP response. Using <code class="highlighter-rouge">@RestController</code>, you need not add the 
<code class="highlighter-rouge">@ResponseBody</code> annotation to each request mapping methods.</p>

<p>JPA (Java Persistence Architecture) API is a Java specification for accessing, persisting, 
and managing data between Java objects / classes and a relational database. JPA providers develop 
a JPA implementation that meets the requirements of the JPA specification. Hibernate is a JPA 
Provider, as well as others such as EclipseLink and TopLink. With a JPA implementation in place 
Java objects can now be persisted to a relational database, since there is underlying code to 
perform the work.</p>

<p>Java provides a no argument constructor if no other constructor defined in the class. In Java 
API (e.g.JPA) an instance of the object is required before the data values of the object can be set, 
as the definition of how the values are applied are defined through instance members of the object. 
If a class only has a constructor that takes some arguments then it may not be possible for the 
library to construct an instance unless a separate no argument constructor is defined.</p>

<p><code class="highlighter-rouge">@Repository</code> - This annotation marks the class as Data Access Object (DAO) which consists of all 
the different operations that you can apply to its associating data in the database. A repository 
interface helps to extend the CRUD repository which is a spring data interface with inbuilt 
functions such as <code class="highlighter-rouge">save</code>, <code class="highlighter-rouge">findbyId</code>, <code class="highlighter-rouge">delete</code>, <code class="highlighter-rouge">count</code> and also you can add any other functions as per 
the requirement. The instance of the repository class in the controller class is used to access the 
tables for a particular entity.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MoviesRepository</span> <span class="kd">extends</span> <span class="n">CrudRepository</span><span class="o">&lt;</span><span class="n">Movies</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="o">{}</span>
</code></pre></div></div>

<p>Here <code class="highlighter-rouge">Movies</code> is the entity that is managed by the repository, and <code class="highlighter-rouge">Integer</code> is the data type of
the primary key of the entity.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/api/findmoviebyid/"</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">findMoviesById</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="n">result</span> <span class="o">=</span> <span class="n">moviesRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">).</span><span class="na">isPresent</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">result</span> <span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
        <span class="k">return</span> <span class="s">"movie id doesn't exist"</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">moviesRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">).</span><span class="na">get</span><span class="o">().</span><span class="na">toString</span><span class="o">();;</span>
<span class="o">}</span>


<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/api/upcomingmovies/"</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Movies</span><span class="o">&gt;</span> <span class="nf">getAllUpcomingMovies</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">moviesRepository</span><span class="o">.</span><span class="na">findUpcomingMovies</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">findById()</code> is inbuilt JPA method.
For custom queries for which we don’t have inbuilt JPA methods:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Query</span><span class="o">(</span><span class="n">nativeQuery</span><span class="o">=</span><span class="kc">true</span><span class="o">,</span> <span class="n">value</span><span class="o">=</span><span class="s">"SELECT * FROM MOVIES WHERE release_date &gt; NOW();"</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Movies</span><span class="o">&gt;</span> <span class="nf">findUpcomingMovies</span><span class="o">();</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">@Modifying</code> - This annotation marks a method, so that the execution of the method will 
update/add data to the database.</p>

<p><code class="highlighter-rouge">@Transactional</code> - This annotation ensures the transaction propagation is handled automatically.</p>



      </section>
      <footer>
        <p><small>Love &mdash; Peace &mdash; Code</small></p>
      </footer>
    </div>
    <script src="/assets/js/scale.fix.js"></script>
    
  </body>
</html>