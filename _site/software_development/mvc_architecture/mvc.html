<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>MVC architecture | saubhik</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="MVC architecture" />
<meta name="author" content="Saubhik Mukherjee" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Personal cyber-space dump." />
<meta property="og:description" content="Personal cyber-space dump." />
<link rel="canonical" href="http://localhost:4000/software_development/mvc_architecture/mvc.html" />
<meta property="og:url" content="http://localhost:4000/software_development/mvc_architecture/mvc.html" />
<meta property="og:site_name" content="saubhik" />
<script type="application/ld+json">
{"description":"Personal cyber-space dump.","author":{"@type":"Person","name":"Saubhik Mukherjee"},"@type":"WebPage","url":"http://localhost:4000/software_development/mvc_architecture/mvc.html","headline":"MVC architecture","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=7f90a6ed2a8ee84cfa7f3ceb5a300c7e86b460f3">
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://localhost:4000/">saubhik</a></h1>

        

        <p>Personal cyber-space dump.</p>

        <p class="view"><a href="https://github.com/saubhik/">View my GitHub profile<small>github.com/saubhik</small></a></p>
        <p class="view"><a href="/posts.html">Blog<small>/posts</small></a></p>

        

        <a href="/index.html">Home</a>
</br><a href="/papers/">Comments on deep learning papers</a>
</br><a href="/epi/">Elements Of Programming Interviews</a>
</br><a href="/software_development/">Software Development</a>
</br><a href="/utilities/">Utilities</a>
</br><a href="/data_science/">Data Science</a>
</br><a href="/notebooks/">Jupyter Notebooks</a>
</br><a href="/deep_learning/">Deep Learning</a>
</br><a href="/coursework/index.html">CS courses notes</a>
</br><a href="/this_site/">About this website</a>
</br><a href="/practice-javascript/">Practice Javascript</a>


      </header>
      <section>

      <h3 id="mvc-architecture">MVC architecture</h3>

<p>Servlet: Java program that runs on a web server that responds to client requests, like
logging in users after verifying credentials. Holds the business logic.</p>

<p>Structure:</p>
<ol>
  <li>init() : initialises the servlet, allocates the memory for any process, passes input params</li>
  <li>service() : doGet(), doPost(), doPut(), doDelete()</li>
  <li>destroy() : called by container before servlet instance is removed, de-allocates memory.</li>
</ol>

<p>JSP: Java Server Pages, HTML files consisting of presentation logic, using Java programs to
render web pages</p>

<p>Servlet Container: Helps to map a specific web address to its corresponding servlet. Also
interacts with servlet for user requests.</p>

<p>Major disadvantage of servlet approach is tight coupling between the presentation logic
and the business logic. This decreases maintainability. So we come to MVC architecture.</p>

<p>Model: Data of different components of a website or application. For example, for a blog, the
model would be posts, post attributes like date-time, comments, author, likes.</p>

<p>View: Presentation logic of the website of the application</p>

<p>Controller: Process data as per user’s request, retrieves required data from model and maps
the corresponding view needed to present the requested data. Business logic comes here.</p>

<p>Spring Boot helps in developing web application and configuring different classes and
methods according to their functions in the Spring framework using annotations. Thymeleaf
is a Java template engine that can process model data and return responses in HTML or XML.
It is a substitute for JSP, and acts as the View part of MVC.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span>
    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
    <span class="nd">@ResponseBody</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">index</span><span class="o">(){</span>    
        <span class="k">return</span> <span class="s">"Welcome to my blog"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The above is an example of a controller. If you remove <code class="highlighter-rouge">@ResponseBody</code>, the dispatcher
servlet will try to look for an HTML in <code class="highlighter-rouge">resources/template</code> folder. In presence of this
annotation, it returns the exact string.</p>

<p>The <code class="highlighter-rouge">@Service</code> annotation tells Spring that it can manage the instantiation of the objects 
of annotated class for us if we use associating Spring annotations in other parts of the 
program, such as <code class="highlighter-rouge">@Autowired</code>.</p>

<p>Model is a key-value-like class (similar to a hash table) instantiated by the Spring 
framework, and it helps to pass data from the controller to the view template. In the 
instruction above, ‘posts’ act as a key, and its corresponding value would be the post 
data stored in the list. Specifically, Spring would automatically pass the model to the 
view template and allow you to access and render the post data by using the key ‘posts’ 
in thymeleaf.</p>

<p>The <code class="highlighter-rouge">@RequestMapping(“/”)</code> instruction will tell Spring to execute the 
“public String index(Model model)” method when user is requesting for the <code class="highlighter-rouge">/</code> path 
under the url and port that the Spring application is listening for incoming client 
requests, which is <code class="highlighter-rouge">localhost:8080</code> in this case. The instruction set inside the 
method calls the <code class="highlighter-rouge">findAll()</code> function and stores the information of all the posts in the 
form of a list.</p>

<p>The <code class="highlighter-rouge">model.addAttribute(“posts”, list)</code> instruction would help in passing the data of 
the posts to the corresponding view template. Then, the method would return to the 
specific HTML file.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">index</span><span class="o">(</span><span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Post</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">postService</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
    <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"posts"</span><span class="o">,</span><span class="n">list</span><span class="o">);</span>
    <span class="k">return</span> <span class="s">"index"</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="file-operations">File Operations</h4>
<p>We use <code class="highlighter-rouge">static</code> in Java, when we want a variable or function to be shared across all
instances of a class. You can use these variables or function even when you haven’t
instantiated the class.</p>

<p>With <code class="highlighter-rouge">final</code> in Java, we define an entity to be assigned only once. It cannot be
overwritten.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileOperations</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">FileOperations</span> <span class="n">fileoperations</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOperations</span><span class="o">();</span>
    <span class="kd">private</span> <span class="nf">FileOperations</span><span class="o">()</span> <span class="o">{}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">FileOperations</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">fileOperations</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>The above is an example of Singleton Design Pattern.
We cannot have multiple instances of this class, as then multiple such instances would
try to read or write from a file. There is only one instance of this class.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">readAllFiles</span><span class="o">(</span><span class="n">String</span> <span class="n">dirPath</span><span class="o">)</span> <span class="o">{</span>
   <span class="kd">synchronized</span> <span class="o">(</span><span class="n">fileOperations</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">arrayList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;();</span>
       <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">dirPath</span><span class="o">);</span>
       <span class="n">File</span><span class="o">[]</span> <span class="n">files</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">listFiles</span><span class="o">();</span>
       <span class="k">if</span> <span class="o">(</span><span class="n">files</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
           <span class="k">for</span> <span class="o">(</span><span class="n">File</span> <span class="n">f</span> <span class="o">:</span> <span class="n">files</span><span class="o">)</span> <span class="o">{</span>
               <span class="k">try</span> <span class="o">{</span>
                   <span class="n">FileInputStream</span> <span class="n">fileInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">f</span><span class="o">);</span>
                   <span class="n">ObjectInputStream</span> <span class="n">objectInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectInputStream</span><span class="o">(</span><span class="n">fileInputStream</span><span class="o">);</span>
                   <span class="n">T</span> <span class="n">readObject</span> <span class="o">=</span> <span class="o">(</span><span class="n">T</span><span class="o">)</span> <span class="n">objectInputStream</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
                   <span class="k">if</span> <span class="o">(</span><span class="n">readObject</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                       <span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">readObject</span><span class="o">);</span>
                   <span class="o">}</span>
               <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                   <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
               <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                   <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
               <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                   <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
               <span class="o">}</span>
           <span class="o">}</span>
       <span class="o">}</span>
       <span class="k">return</span> <span class="n">arrayList</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Observe the <code class="highlighter-rouge">synchronized</code>. This helps in situations where multiple threads are trying
to access the same resource at the same time. It lets only one thread access the
<code class="highlighter-rouge">fileOperations</code> object.</p>

<p>All synchronized blocks synchronized on the same object can only have one thread 
executing inside them at a time.</p>

<p>To <code class="highlighter-rouge">serialize</code> an object is to convert its state to a byte stream so that the byte
stream can be reverted back into a copy of the object. <code class="highlighter-rouge">ObjectInputStream</code> is a Java 
built-in class that converts byte streams from the <code class="highlighter-rouge">fileInputStream</code> variable into 
Java objects. This process is called deserialization.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">readRecentFiles</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">numberOfFiles</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DirLocation</span><span class="o">)</span> <span class="o">{</span>
   <span class="kd">synchronized</span> <span class="o">(</span><span class="n">fileOperations</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">Map</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">,</span> <span class="n">File</span><span class="o">&gt;</span> <span class="n">sortByModificationDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">,</span> <span class="n">File</span><span class="o">&gt;(</span><span class="n">Collections</span><span class="o">.</span><span class="na">reverseOrder</span><span class="o">());</span>
       <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">arrayList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;();</span>
       <span class="k">try</span> <span class="o">{</span>
           <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">DirLocation</span><span class="o">);</span>
           <span class="n">File</span><span class="o">[]</span> <span class="n">files</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">listFiles</span><span class="o">();</span>
           <span class="k">if</span> <span class="o">(</span><span class="n">files</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
               <span class="k">for</span> <span class="o">(</span><span class="n">File</span> <span class="n">f</span> <span class="o">:</span> <span class="n">files</span><span class="o">)</span> <span class="o">{</span>
                   <span class="n">sortByModificationDate</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">lastModified</span><span class="o">(),</span> <span class="n">f</span><span class="o">);</span>
               <span class="o">}</span>
               <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">numberOfFiles</span><span class="o">;</span>
               <span class="k">for</span> <span class="o">(</span><span class="n">Long</span> <span class="n">modifiedOn</span> <span class="o">:</span> <span class="n">sortByModificationDate</span><span class="o">.</span><span class="na">keySet</span><span class="o">())</span> <span class="o">{</span>
                   <span class="n">FileInputStream</span> <span class="n">fileInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">sortByModificationDate</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">modifiedOn</span><span class="o">));</span>
                   <span class="n">ObjectInputStream</span> <span class="n">objectInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectInputStream</span><span class="o">(</span><span class="n">fileInputStream</span><span class="o">);</span>
                   <span class="n">T</span> <span class="n">readObject</span> <span class="o">=</span> <span class="o">(</span><span class="n">T</span><span class="o">)</span> <span class="n">objectInputStream</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
                   <span class="k">if</span> <span class="o">(</span><span class="n">readObject</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                       <span class="n">arrayList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">readObject</span><span class="o">);</span>
                   <span class="o">}</span>
                   <span class="n">count</span><span class="o">--;</span>
                   <span class="k">if</span> <span class="o">(</span><span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
               <span class="o">}</span>
           <span class="o">}</span>
       <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
           <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
       <span class="o">}</span>
       <span class="k">return</span> <span class="n">arrayList</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="n">T</span> <span class="nf">readFile</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">filePrefix</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uniqueId</span><span class="o">)</span> <span class="o">{</span>
   <span class="kd">synchronized</span> <span class="o">(</span><span class="n">fileOperations</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">T</span> <span class="n">readObject</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
       <span class="k">try</span> <span class="o">{</span>
           <span class="n">FileInputStream</span> <span class="n">fileInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">filePrefix</span> <span class="o">+</span> <span class="n">uniqueId</span><span class="o">));</span>
           <span class="n">ObjectInputStream</span> <span class="n">objectInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectInputStream</span><span class="o">(</span><span class="n">fileInputStream</span><span class="o">);</span>
           <span class="n">readObject</span> <span class="o">=</span> <span class="o">(</span><span class="n">T</span><span class="o">)</span> <span class="n">objectInputStream</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
       <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
           <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
       <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
           <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
       <span class="o">}</span>
       <span class="k">return</span> <span class="n">readObject</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="kt">boolean</span> <span class="nf">deleteFile</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">filePrefix</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uniqueId</span><span class="o">)</span> <span class="o">{</span>
   <span class="kd">synchronized</span> <span class="o">(</span><span class="n">fileOperations</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">filePrefix</span> <span class="o">+</span> <span class="n">uniqueId</span><span class="o">);</span>
       <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">delete</span><span class="o">();</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="n">T</span> <span class="nf">writeToFile</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">filePrefix</span><span class="o">,</span> <span class="kd">final</span> <span class="n">T</span> <span class="n">object</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">suffix</span><span class="o">)</span> <span class="o">{</span>
   <span class="kd">synchronized</span> <span class="o">(</span><span class="n">fileOperations</span><span class="o">)</span> <span class="o">{</span>
       <span class="k">try</span> <span class="o">{</span>

           <span class="n">FileOutputStream</span> <span class="n">fileOutputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">filePrefix</span> <span class="o">+</span> <span class="n">suffix</span><span class="o">),</span> <span class="kc">true</span><span class="o">);</span>
           <span class="n">ObjectOutputStream</span> <span class="n">objectOutputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectOutputStream</span><span class="o">(</span><span class="n">fileOutputStream</span><span class="o">);</span>
           <span class="n">objectOutputStream</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">object</span><span class="o">);</span>
           <span class="n">objectOutputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
           <span class="n">fileOutputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
       <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
           <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
       <span class="o">}</span>
       <span class="k">return</span> <span class="n">object</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>



      </section>
      <footer>
        <p><small>Love &mdash; Peace &mdash; Code</small></p>
      </footer>
    </div>
    <script src="/assets/js/scale.fix.js"></script>
    
  </body>
</html>