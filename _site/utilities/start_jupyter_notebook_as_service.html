<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Start jupyter notebook server as service on boot | saubhik</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Start jupyter notebook server as service on boot" />
<meta name="author" content="Saubhik Mukherjee" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Personal cyber-space dump." />
<meta property="og:description" content="Personal cyber-space dump." />
<link rel="canonical" href="http://localhost:4000/utilities/start_jupyter_notebook_as_service.html" />
<meta property="og:url" content="http://localhost:4000/utilities/start_jupyter_notebook_as_service.html" />
<meta property="og:site_name" content="saubhik" />
<script type="application/ld+json">
{"description":"Personal cyber-space dump.","author":{"@type":"Person","name":"Saubhik Mukherjee"},"@type":"WebPage","url":"http://localhost:4000/utilities/start_jupyter_notebook_as_service.html","headline":"Start jupyter notebook server as service on boot","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=7f90a6ed2a8ee84cfa7f3ceb5a300c7e86b460f3">
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://localhost:4000/">saubhik</a></h1>

        

        <p>Personal cyber-space dump.</p>

        <p class="view"><a href="https://github.com/saubhik/">View my GitHub profile<small>github.com/saubhik</small></a></p>
        <p class="view"><a href="/posts.html">Blog<small>/posts</small></a></p>

        

        <a href="/index.html">Home</a>
</br><a href="/papers/">Comments on deep learning papers</a>
</br><a href="/epi/">Elements Of Programming Interviews</a>
</br><a href="/software_development/">Software Development</a>
</br><a href="/utilities/">Utilities</a>
</br><a href="/data_science/">Data Science</a>
</br><a href="/notebooks/">Jupyter Notebooks</a>
</br><a href="/deep_learning/">Deep Learning</a>
</br><a href="/coursework/index.html">CS courses notes</a>
</br><a href="/this_site/">About this website</a>
</br><a href="/practice-javascript/">Practice Javascript</a>


      </header>
      <section>

      <h1 id="start-jupyter-notebook-server-as-service-on-boot">Start jupyter notebook server as service on boot</h1>

<p>I am working in Fedora 28, so the instructions are according to this platform.</p>

<p>This might work on any Linux distribution using <code class="highlighter-rouge">systemd</code> as its process manager.</p>

<p>Steps:</p>
<ol>
  <li>
    <p>Create the systemd unit file as root: <code class="highlighter-rouge">sudo vim /usr/lib/systemd/system/jupyter-notebook.service</code></p>
  </li>
  <li>
    <p>Write the following into it:</p>
  </li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>Unit]
<span class="nv">Description</span><span class="o">=</span>jupyter notebook

<span class="o">[</span>Service]
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">PIDFile</span><span class="o">=</span>/var/run/jupyter-notebook.pid
<span class="nv">ExecStart</span><span class="o">=</span>/py3env/bin/jupyter-notebook <span class="nt">--no-browser</span> <span class="nt">--port</span><span class="o">=</span>8000
<span class="nv">User</span><span class="o">=</span>ipynb
<span class="nv">Group</span><span class="o">=</span>ipynb
<span class="nv">WorkingDirectory</span><span class="o">=</span>/home/ipynb/notebooks

<span class="o">[</span>Install]
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</code></pre></div></div>

<ol>
  <li>Create the user <code class="highlighter-rouge">ipynb</code>:</li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>useradd ipynb
</code></pre></div></div>

<p>Set password using <code class="highlighter-rouge">sudo passwd ipynb</code> and login as <code class="highlighter-rouge">ipynb</code> &amp; do <code class="highlighter-rouge">mkdir notebooks</code>.</p>

<ol>
  <li>Start the jupyter notebook service.</li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl daemon-reload
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>jupyter-notebook
<span class="nb">sudo </span>systemctl start jupyter-notebook
</code></pre></div></div>

<p>To check the status one can do <code class="highlighter-rouge">sudo systemctl status jupyter-notebook</code>.</p>

<p>To stop the service one can do <code class="highlighter-rouge">sudo systemctl stop jupyter-notebook</code>.</p>

<h2 id="start-jupyterhub-as-a-system-service">Start jupyterhub as a system service</h2>

<p>The process is very similar:</p>
<ol>
  <li><code class="highlighter-rouge">sudo vim /usr/lib/systemd/system/jupyter.service</code></li>
  <li>Write the following:</li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>Unit]
<span class="nv">Description</span><span class="o">=</span>jupyterhub

<span class="o">[</span>Service]
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">PIDFile</span><span class="o">=</span>/var/run/jupyterhub.pid
<span class="nv">ExecStart</span><span class="o">=</span>/usr/local/bin/jupyterhub <span class="nt">--port</span> 8000

<span class="o">[</span>Install]
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</code></pre></div></div>
<ol>
  <li>Do the following</li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>chmod +x /usr/lib/systemd/system/jupyter.service
<span class="nb">sudo </span>systemctl daemon reload
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>jupyter.service
<span class="nb">sudo </span>systemctl start jupyter.service
</code></pre></div></div>

<p>And we are done!
I did not find any SELinux problems while doing the above 3 steps in our linux box. To check if there could be issues with SELinux, then type <code class="highlighter-rouge">ls -l</code> and see if the permissions end with a <code class="highlighter-rouge">.</code> (SELinux enforced) or not.</p>


      </section>
      <footer>
        <p><small>Love &mdash; Peace &mdash; Code</small></p>
      </footer>
    </div>
    <script src="/assets/js/scale.fix.js"></script>
    
  </body>
</html>